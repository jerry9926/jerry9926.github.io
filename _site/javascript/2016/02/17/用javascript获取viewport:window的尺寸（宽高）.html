<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

    <title>用javascript获取viewport/window的尺寸（宽高）</title>
    <link rel="canonical" href="http://jerry9926.github.io/javascript/2016/02/17/%E7%94%A8javascript%E8%8E%B7%E5%8F%96viewport:window%E7%9A%84%E5%B0%BA%E5%AF%B8%EF%BC%88%E5%AE%BD%E9%AB%98%EF%BC%89.html">

    <link href="/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="/css/main.css">
    <link href="/css/index.css" rel="stylesheet">
	<script src="/js/jquery-1.11.1.min.js"></script>
	<script src="/js/bootstrap.min.js"></script>
</head>


  <body>

    <div class="container-fluid">
      <div class="row">
        <div class="side-bar col-xs-12 col-sm-3 col-md-3 col-lg-3">
          <!--Sidebar content-->
          <div class="head-wrapper">
            <img src="/assets/images/ui/icon.jpg" alt="head-icon">
          </div>
          <h1 class="title">库乐君的笔记本</h1>
          <h2 class="decs">所谓文艺，不过是多走一些路，多看一些风景罢了</h2>
          <ul class="nav">
            <li><a href="/">首页</a></li>
            
            <li><a href="/ios/" title="查看更多文章">ios 6</a>
            </li>
            
            <li><a href="/工具/" title="查看更多文章">工具 3</a>
            </li>
            
            <li><a href="/css/" title="查看更多文章">css 2</a>
            </li>
            
            <li><a href="/javascript/" title="查看更多文章">javascript 4</a>
            </li>
            
          </ul>

        </div>
        <div class="content-contain col-xs-12 col-sm-9 col-md-9 col-lg-9">
          <!--Body content-->
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">用javascript获取viewport/window的尺寸（宽高）</h1>
    <p class="post-meta">2016-02-17</p>
  </header>

  <article class="post-content">
    <p>CSS媒体查询和javascript的window宽度不相等</p>

<!-- more -->


<p><strong>CSS使用的是设备宽度，JS使用的是document的宽度。</strong></p>

<p>要点：</p>

<p><strong>标准浏览器</strong></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">viewportwidth</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span>
<span class="nx">viewportheight</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span></code></pre></div>


<p><strong>IE6</strong></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">viewportwidth</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">,</span>
<span class="nx">viewportheight</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span></code></pre></div>


<p><strong>IE6以下</strong></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">viewportwidth</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">clientWidth</span><span class="p">,</span>
<span class="nx">viewportheight</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">clientHeight</span></code></pre></div>


<p>可以使用以下方法</p>

<p>简短版：</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">viewport</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nb">window</span><span class="p">,</span> <span class="nx">a</span> <span class="o">=</span> <span class="s1">&#39;inner&#39;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="s1">&#39;innerWidth&#39;</span> <span class="k">in</span> <span class="nb">window</span> <span class="p">))</span> <span class="p">{</span>
        <span class="nx">a</span> <span class="o">=</span> <span class="s1">&#39;client&#39;</span><span class="p">;</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">width</span> <span class="o">:</span> <span class="nx">e</span><span class="p">[</span> <span class="nx">a</span><span class="o">+</span><span class="s1">&#39;Width&#39;</span> <span class="p">]</span> <span class="p">,</span> <span class="nx">height</span> <span class="o">:</span> <span class="nx">e</span><span class="p">[</span> <span class="nx">a</span><span class="o">+</span><span class="s1">&#39;Height&#39;</span> <span class="p">]</span> <span class="p">};</span>
<span class="p">}</span></code></pre></div>


<p>长版：</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">viewportwidth</span><span class="p">;</span>
 <span class="kd">var</span> <span class="nx">viewportheight</span><span class="p">;</span>

 <span class="c1">// the more standards compliant browsers (mozilla/netscape/opera/IE7) use window.innerWidth and window.innerHeight</span>

 <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">!=</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span>
 <span class="p">{</span>
      <span class="nx">viewportwidth</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span>
      <span class="nx">viewportheight</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span>
 <span class="p">}</span>

<span class="c1">// IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)</span>

 <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span> <span class="o">!=</span> <span class="s1">&#39;undefined&#39;</span>
     <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">!=</span>
     <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
 <span class="p">{</span>
       <span class="nx">viewportwidth</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">,</span>
       <span class="nx">viewportheight</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span>
 <span class="p">}</span>

 <span class="c1">// older versions of IE</span>

 <span class="k">else</span>
 <span class="p">{</span>
       <span class="nx">viewportwidth</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">clientWidth</span><span class="p">,</span>
       <span class="nx">viewportheight</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">clientHeight</span>
 <span class="p">}</span></code></pre></div>


<p>参考：<a href="https://andylangton.co.uk/blog/development/get-viewportwindow-size-width-and-height-javascript" target="_blank">get-viewportwindow-size-width-and-height-javascript</a></p>

  </article>

</div>


          <footer class="site-footer">

  <div class="wrapper">
    <p class="footer-heading">Copyright © 2017 - <a href="/">库乐君的笔记本</a> - Base on <a href="http://github.com">Github</a> & <a href="http://jekyllrb.com">Jekyll</a></p>
  </div>
  <script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?075085658c25fed7cc4d8789f23c6519";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
</script>
</footer>

        </div>
      </div>
    </div>

  </body>

</html>
